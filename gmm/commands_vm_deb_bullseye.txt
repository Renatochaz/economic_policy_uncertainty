sudo apt-get update
sudo apt-get upgrade -y
sudo apt-get install r-base r-base-dev libatlas3-base libopenblas-base screen -y
sudo apt-get install git -y
sudo git clone https://github.com/Renatochaz/economic_policy_uncertainty.git

sudo su - -c "R -e \"install.packages('plm')\""
sudo su - -c "R -e \"install.packages('miscTools')\""
sudo su - -c "R -e \"install.packages('stringr')\""
sudo su - -c "R -e \"install.packages('dplyr')\""


# create screen
screen -S gmm

# exit screen
crtl+a +d

# kill screen
screen -X -S gmm kill

# download path
/home/renato_ch/economic_policy_uncertainty/gmm/csv_results/

# remove reclone
sudo rm -r economic_policy_uncertainty
sudo git clone https://github.com/Renatochaz/economic_policy_uncertainty.git


### inv model
source("/home/renato_ch/economic_policy_uncertainty/gmm/inv_full_no_macro.r")

source("/home/renato_ch/economic_policy_uncertainty/gmm/inv_kz_constrained_no_macro.r"); source("/home/renato_ch/economic_policy_uncertainty/gmm/inv_kz_unconstrained_no_macro.r")

source("/home/renato_ch/economic_policy_uncertainty/gmm/inv_ww_constrained_no_macro.r"); source("/home/renato_ch/economic_policy_uncertainty/gmm/inv_ww_unconstrained_no_macro.r")

source("/home/renato_ch/economic_policy_uncertainty/gmm/inv_sa_constrained_no_macro.r"); source("/home/renato_ch/economic_policy_uncertainty/gmm/inv_sa_unconstrained_no_macro.r")

source("/home/renato_ch/economic_policy_uncertainty/gmm/inv_fcp_constrained_no_macro.r"); source("/home/renato_ch/economic_policy_uncertainty/gmm/inv_fcp_unconstrained_no_macro.r")

# Download vm files
gcloud compute scp gmm-1:~/economic_policy_uncertainty/gmm/csv_results/inv_full_no_macro.csv gmm/inv_full_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-2:~/economic_policy_uncertainty/gmm/csv_results/inv_kz_constrained_no_macro.csv gmm/inv_kz_constrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-2:~/economic_policy_uncertainty/gmm/csv_results/inv_kz_unconstrained_no_macro.csv gmm/inv_kz_unconstrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-3:~/economic_policy_uncertainty/gmm/csv_results/inv_ww_constrained_no_macro.csv gmm/inv_ww_constrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-3:~/economic_policy_uncertainty/gmm/csv_results/inv_ww_unconstrained_no_macro.csv gmm/inv_ww_unconstrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-4:~/economic_policy_uncertainty/gmm/csv_results/inv_sa_constrained_no_macro.csv gmm/inv_sa_constrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-4:~/economic_policy_uncertainty/gmm/csv_results/inv_sa_unconstrained_no_macro.csv gmm/inv_sa_unconstrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-5:~/economic_policy_uncertainty/gmm/csv_results/inv_fcp_constrained_no_macro.csv gmm/inv_fcp_constrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-5:~/economic_policy_uncertainty/gmm/csv_results/inv_fcp_unconstrained_no_macro.csv gmm/inv_fcp_unconstrained_no_macro.csv --zone=us-central1-c

### model no macro
source("/home/renato_ch/economic_policy_uncertainty/gmm/model_full_no_macro.r")

source("/home/renato_ch/economic_policy_uncertainty/gmm/model_kz_constrained_no_macro.r"); source("/home/renato_ch/economic_policy_uncertainty/gmm/model_kz_unconstrained_no_macro.r")

source("/home/renato_ch/economic_policy_uncertainty/gmm/model_ww_constrained_no_macro.r"); source("/home/renato_ch/economic_policy_uncertainty/gmm/model_ww_unconstrained_no_macro.r")

source("/home/renato_ch/economic_policy_uncertainty/gmm/model_sa_constrained_no_macro.r"); source("/home/renato_ch/economic_policy_uncertainty/gmm/model_sa_unconstrained_no_macro.r")

source("/home/renato_ch/economic_policy_uncertainty/gmm/model_fcp_constrained_no_macro.r"); source("/home/renato_ch/economic_policy_uncertainty/gmm/model_fcp_unconstrained_no_macro.r")

# Download vm files
gcloud compute scp gmm-1:~/economic_policy_uncertainty/gmm/csv_results/model_full_no_macro.csv gmm/model_no_macro/model_full_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-2:~/economic_policy_uncertainty/gmm/csv_results/model_kz_constrained_no_macro.csv gmm/model_no_macro/model_kz_constrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-2:~/economic_policy_uncertainty/gmm/csv_results/model_kz_unconstrained_no_macro.csv gmm/model_no_macro/model_kz_unconstrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-3:~/economic_policy_uncertainty/gmm/csv_results/model_ww_constrained_no_macro.csv gmm/model_no_macro/model_ww_constrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-3:~/economic_policy_uncertainty/gmm/csv_results/model_ww_unconstrained_no_macro.csv gmm/model_no_macro/model_ww_unconstrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-4:~/economic_policy_uncertainty/gmm/csv_results/model_sa_constrained_no_macro.csv gmm/model_no_macro/model_sa_constrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-4:~/economic_policy_uncertainty/gmm/csv_results/model_sa_unconstrained_no_macro.csv gmm/model_no_macro/model_sa_unconstrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-5:~/economic_policy_uncertainty/gmm/csv_results/model_fcp_constrained_no_macro.csv gmm/model_no_macro/model_fcp_constrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-5:~/economic_policy_uncertainty/gmm/csv_results/model_fcp_unconstrained_no_macro.csv gmm/model_no_macro/model_fcp_unconstrained_no_macro.csv --zone=us-central1-c


### model brute
sudo rm -r economic_policy_uncertainty
sudo git clone https://github.com/Renatochaz/economic_policy_uncertainty.git

savename <- "fcp_constrained_no_macro"
dummy <- "dum_fcp"
constraint <- "1"
full = "no"
source("/home/renato_ch/economic_policy_uncertainty/gmm/model_brute_no_macro.r")

gcloud compute scp gmm-2:~/economic_policy_uncertainty/gmm/csv_results/brute_no_macrokz_constrained_no_macro.csv gmm/brute_no_macro/kz_constrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-3:~/economic_policy_uncertainty/gmm/csv_results/brute_no_macroww_constrained_no_macro.csv gmm/brute_no_macro/ww_constrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-4:~/economic_policy_uncertainty/gmm/csv_results/brute_no_macrosa_constrained_no_macro.csv gmm/brute_no_macro/sa_constrained_no_macro.csv --zone=us-central1-c
gcloud compute scp gmm-5:~/economic_policy_uncertainty/gmm/csv_results/brute_no_macrofcp_constrained_no_macro.csv gmm/brute_no_macro/fcp_constrained_no_macro.csv --zone=us-central1-c